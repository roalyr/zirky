[gd_scene load_steps=40 format=2]

[ext_resource path="res://Scripts/Zones/LODs_zones/LODs_trigger.gd" type="Script" id=2]
[ext_resource path="res://Assets/Shaders/Clouds/Global_cloud_main.gdshader" type="Shader" id=3]
[ext_resource path="res://Assets/Shaders/Clouds/Global_cloud_fade_simple.tres" type="Shader" id=4]
[ext_resource path="res://Assets/Shaders/Clouds/Global_cloud_fade_simple_out.tres" type="Shader" id=7]
[ext_resource path="res://Scenes/Editor_scenes/_EDITOR_OBJECTS_.tscn" type="PackedScene" id=10]
[ext_resource path="res://Scripts/Zones/Zone_nebula_global.gd" type="Script" id=18]
[ext_resource path="res://Assets/Shaders/Solid/Solid_material.gdshader" type="Shader" id=20]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_1.glb" type="PackedScene" id=39]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_2.glb" type="PackedScene" id=40]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_3.glb" type="PackedScene" id=41]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_4.glb" type="PackedScene" id=42]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_5.glb" type="PackedScene" id=43]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_6.glb" type="PackedScene" id=44]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_7.glb" type="PackedScene" id=45]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_8.glb" type="PackedScene" id=46]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_9.glb" type="PackedScene" id=47]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_10.glb" type="PackedScene" id=48]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_11.glb" type="PackedScene" id=49]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_12.glb" type="PackedScene" id=50]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_13.glb" type="PackedScene" id=51]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_14.glb" type="PackedScene" id=52]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_15.glb" type="PackedScene" id=53]
[ext_resource path="res://Assets/Models/Environment/Stellar/Clouds/Cloud_global_segments_new/Cloud_global_new_16.glb" type="PackedScene" id=54]

[sub_resource type="SphereMesh" id=76]

[sub_resource type="ShaderMaterial" id=110]
shader = ExtResource( 4 )
shader_param/albedo = Color( 0.027451, 0.0705882, 0.0901961, 1 )
shader_param/distance_fade_max = 2e+18

[sub_resource type="ShaderMaterial" id=113]
next_pass = SubResource( 110 )
shader = ExtResource( 7 )
shader_param/albedo = Color( 0.0666667, 0.0862745, 0.0980392, 1 )
shader_param/distance_fade_max = 1e+17

[sub_resource type="ShaderMaterial" id=62]
next_pass = SubResource( 113 )
shader = ExtResource( 7 )
shader_param/albedo = Color( 0.0666667, 0.0862745, 0.0980392, 1 )
shader_param/distance_fade_max = 1e+18

[sub_resource type="OpenSimplexNoise" id=111]
period = 0.1

[sub_resource type="NoiseTexture" id=75]
width = 32
height = 32
seamless = true
noise = SubResource( 111 )

[sub_resource type="ShaderMaterial" id=112]
next_pass = SubResource( 62 )
shader = ExtResource( 3 )
shader_param/albedo = Color( 0.286275, 0.286275, 0.286275, 1 )
shader_param/albedo_outer = Color( 0.545098, 0.360784, 0.262745, 1 )
shader_param/albedo_detail = Color( 0.160784, 0.6, 0.486275, 1 )
shader_param/major_detail_scale = 0.234
shader_param/major_detail_phase = 1.112
shader_param/factor = 0.8
shader_param/distance_fade_detail = 6e+18
shader_param/distance_fade_outer_rim = 1e+19
shader_param/rim_strength = 0.8
shader_param/rim_exponent = 1.0
shader_param/color_power_r = 1.0
shader_param/color_power_g = 1.0
shader_param/color_power_b = 1.0
shader_param/color_multiplier_r = 1.3
shader_param/color_multiplier_g = 1.3
shader_param/color_multiplier_b = 1.3
shader_param/major_detail_noise = SubResource( 75 )

[sub_resource type="QuadMesh" id=115]

[sub_resource type="ShaderMaterial" id=116]
shader = ExtResource( 20 )
shader_param/albedo = Color( 0, 0, 0, 1 )
shader_param/emission = Color( 0.0627451, 0.443137, 0, 1 )
shader_param/specular = 0.5
shader_param/metallic = 0.0
shader_param/roughness = 0.5

[sub_resource type="ShaderMaterial" id=121]
shader = ExtResource( 20 )
shader_param/albedo = Color( 0, 0, 0, 1 )
shader_param/emission = Color( 0, 0.337255, 0.443137, 1 )
shader_param/specular = 0.5
shader_param/metallic = 0.0
shader_param/roughness = 0.5

[sub_resource type="PlaneMesh" id=117]

[sub_resource type="ShaderMaterial" id=118]
shader = ExtResource( 20 )
shader_param/albedo = null
shader_param/emission = Color( 0.796078, 0.596078, 0, 1 )
shader_param/specular = 0.5
shader_param/metallic = 0.0
shader_param/roughness = 0.5

[sub_resource type="PlaneMesh" id=119]

[sub_resource type="ShaderMaterial" id=120]
shader = ExtResource( 20 )
shader_param/albedo = null
shader_param/emission = Color( 0.729412, 0.254902, 0, 1 )
shader_param/specular = 0.5
shader_param/metallic = 0.0
shader_param/roughness = 0.5

[sub_resource type="GDScript" id=122]
resource_name = "Gobal_cloud_segments_LOD_ranges"
script/source = "extends Spatial

# TODO: Make this a global option for all such cases where LODs distances are computed.
const lod_0_rel_dist = 1
const lod_1_factor = 1.5
const lod_2_factor = 2.0

# Keep this a constant since it is a scale factor of a global nebula.
const base_abs_size = 1e18

func _ready():
	pass
	# Automatically set LODs.
	for child in self.get_children():
		var size_ratio = base_abs_size/child.object_absolute_size
		child.use_aabb_for_size = true
		child.lod_0_relative_distance = lod_0_rel_dist*size_ratio
		child.lod_1_relative_distance = child.lod_0_relative_distance * lod_1_factor
		child.lod_2_relative_distance = child.lod_0_relative_distance * lod_2_factor
"

[sub_resource type="SphereShape" id=114]

[node name="Nebula_global" type="Area"]
input_ray_pickable = false
monitorable = false
gravity = 0.0
linear_damp = 0.0
angular_damp = 0.0
script = ExtResource( 18 )

[node name="_EDITOR OBJECTS_" parent="." instance=ExtResource( 10 )]
visible = false

[node name="Cloud_global_mat" type="Spatial" parent="_EDITOR OBJECTS_"]
visible = false

[node name="Cloud_global_inner" type="MeshInstance" parent="_EDITOR OBJECTS_/Cloud_global_mat"]
transform = Transform( 1.02301, 0, 0, 0, 1.02301, 0, 0, 0, 1.02301, 9.07576e+17, -1.5189e+17, -2.98373e+17 )
visible = false
mesh = SubResource( 76 )
skeleton = NodePath("../..")
material/0 = SubResource( 112 )

[node name="Cloud_global_fog_dense" type="MeshInstance" parent="_EDITOR OBJECTS_/Cloud_global_mat/Cloud_global_inner"]
visible = false
mesh = SubResource( 76 )
skeleton = NodePath("../../..")
material/0 = SubResource( 113 )

[node name="Cloud_inner_fog_thin_innermost" type="MeshInstance" parent="_EDITOR OBJECTS_/Cloud_global_mat/Cloud_global_inner/Cloud_global_fog_dense"]
visible = false
mesh = SubResource( 76 )
skeleton = NodePath("../../../..")
material/0 = SubResource( 110 )

[node name="mat_LOD1" type="MeshInstance" parent="_EDITOR OBJECTS_"]
visible = false
mesh = SubResource( 115 )
material/0 = SubResource( 116 )

[node name="mat_LOD0" type="MeshInstance" parent="_EDITOR OBJECTS_"]
visible = false
mesh = SubResource( 115 )
material/0 = SubResource( 121 )

[node name="mat_LOD2" type="MeshInstance" parent="_EDITOR OBJECTS_"]
visible = false
mesh = SubResource( 117 )
material/0 = SubResource( 118 )

[node name="mat_LOD3" type="MeshInstance" parent="_EDITOR OBJECTS_"]
visible = false
mesh = SubResource( 119 )
material/0 = SubResource( 120 )

[node name="Scenes" type="Spatial" parent="."]
script = SubResource( 122 )
__meta__ = {
"_edit_lock_": true,
"_editor_description_": ""
}

[node name="Cloud_global_new_1" parent="Scenes" instance=ExtResource( 39 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD0" parent="Scenes/Cloud_global_new_1" index="0"]
material/0 = SubResource( 112 )

[node name="LOD1" parent="Scenes/Cloud_global_new_1" index="1"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_1" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_1" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_2" parent="Scenes" instance=ExtResource( 40 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD0" parent="Scenes/Cloud_global_new_2" index="0"]
material/0 = SubResource( 112 )

[node name="LOD1" parent="Scenes/Cloud_global_new_2" index="1"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_2" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_2" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_3" parent="Scenes" instance=ExtResource( 41 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD0" parent="Scenes/Cloud_global_new_3" index="0"]
material/0 = SubResource( 112 )

[node name="LOD1" parent="Scenes/Cloud_global_new_3" index="1"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_3" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_3" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_4" parent="Scenes" instance=ExtResource( 42 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD2" parent="Scenes/Cloud_global_new_4" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD1" parent="Scenes/Cloud_global_new_4" index="1"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_4" index="2"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_4" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_5" parent="Scenes" instance=ExtResource( 43 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD1" parent="Scenes/Cloud_global_new_5" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_5" index="1"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_5" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_5" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_6" parent="Scenes" instance=ExtResource( 44 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD1" parent="Scenes/Cloud_global_new_6" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_6" index="1"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_6" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_6" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_7" parent="Scenes" instance=ExtResource( 45 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD1" parent="Scenes/Cloud_global_new_7" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_7" index="1"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_7" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_7" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_8" parent="Scenes" instance=ExtResource( 46 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD1" parent="Scenes/Cloud_global_new_8" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_8" index="1"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_8" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_8" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_9" parent="Scenes" instance=ExtResource( 47 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD1" parent="Scenes/Cloud_global_new_9" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_9" index="1"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_9" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_9" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_10" parent="Scenes" instance=ExtResource( 48 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD1" parent="Scenes/Cloud_global_new_10" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_10" index="1"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_10" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_10" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_11" parent="Scenes" instance=ExtResource( 49 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD3" parent="Scenes/Cloud_global_new_11" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_11" index="1"]
material/0 = SubResource( 112 )

[node name="LOD1" parent="Scenes/Cloud_global_new_11" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_11" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_12" parent="Scenes" instance=ExtResource( 50 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD1" parent="Scenes/Cloud_global_new_12" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_12" index="1"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_12" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_12" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_13" parent="Scenes" instance=ExtResource( 51 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD2" parent="Scenes/Cloud_global_new_13" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_13" index="1"]
material/0 = SubResource( 112 )

[node name="LOD1" parent="Scenes/Cloud_global_new_13" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_13" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_14" parent="Scenes" instance=ExtResource( 52 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD0" parent="Scenes/Cloud_global_new_14" index="0"]
material/0 = SubResource( 112 )

[node name="LOD1" parent="Scenes/Cloud_global_new_14" index="1"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_14" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_14" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_15" parent="Scenes" instance=ExtResource( 53 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD1" parent="Scenes/Cloud_global_new_15" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_15" index="1"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_15" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_15" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="Cloud_global_new_16" parent="Scenes" instance=ExtResource( 54 )]
transform = Transform( 1e+18, 0, 0, 0, 1e+18, 0, 0, 0, 1e+18, 0, 0, 0 )
script = ExtResource( 2 )
use_aabb_for_size = true

[node name="LOD1" parent="Scenes/Cloud_global_new_16" index="0"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD0" parent="Scenes/Cloud_global_new_16" index="1"]
material/0 = SubResource( 112 )

[node name="LOD3" parent="Scenes/Cloud_global_new_16" index="2"]
visible = false
material/0 = SubResource( 112 )

[node name="LOD2" parent="Scenes/Cloud_global_new_16" index="3"]
visible = false
material/0 = SubResource( 112 )

[node name="CollisionShape" type="CollisionShape" parent="."]
transform = Transform( 7.56e+17, 0, 0, 0, 5.52e+17, 0, 0, 0, 6.02e+17, -0.0580967, 0.0230848, 0.0268611 )
shape = SubResource( 114 )

[connection signal="body_entered" from="." to="." method="_on_Zone_nebula_global_body_entered"]
[connection signal="body_exited" from="." to="." method="_on_Zone_nebula_global_body_exited"]

[editable path="Scenes/Cloud_global_new_1"]
[editable path="Scenes/Cloud_global_new_2"]
[editable path="Scenes/Cloud_global_new_3"]
[editable path="Scenes/Cloud_global_new_4"]
[editable path="Scenes/Cloud_global_new_5"]
[editable path="Scenes/Cloud_global_new_6"]
[editable path="Scenes/Cloud_global_new_7"]
[editable path="Scenes/Cloud_global_new_8"]
[editable path="Scenes/Cloud_global_new_9"]
[editable path="Scenes/Cloud_global_new_10"]
[editable path="Scenes/Cloud_global_new_11"]
[editable path="Scenes/Cloud_global_new_12"]
[editable path="Scenes/Cloud_global_new_13"]
[editable path="Scenes/Cloud_global_new_14"]
[editable path="Scenes/Cloud_global_new_15"]
[editable path="Scenes/Cloud_global_new_16"]
